<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuralTrend</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --nav-height: 110px; /* adjust if needed */
        }
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            font-size: 18px;
        }

        /* Navbar container */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #1a7d9c;
            padding: 10px 30px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--nav-height);
            z-index: 1000;
        }

        /* Logo styling */
        .navbar .logo img {
            height: 100px;
        }

        /* Links container */
        .navbar .nav-links {
            display: flex;
        }

        /* Links styling */
        .navbar .nav-links a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            margin-left: 5px;
            font-size: 16px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        /* Hover effect */
        .navbar .nav-links a:hover {
            background-color: #575757;
        }

        /* Main content pushed down below navbar */
        main {
            padding-top: calc(var(--nav-height) + 20px);
            padding-left: 30px; /* added left padding */
        }

        .product-box {
            background-color: #f9f9f9; /* very light gray — you can use your own color */
            padding: 20px;
            border-radius: 8px; /* optional, for rounded edges */
            box-shadow: 0 0 10px rgba(0,0,0,0.05); /* optional, soft shadow */
        }

        .three-blocks {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 20px;
        }

        .block {
            background-color: #f9f9f9; /* Light gray box */
            border-radius: 8px;
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .block-title {
            background-color: #e3e3e3; /* Title background */
            padding: 10px;
            font-weight: bold;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .block-chart {
            flex: 1;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            min-height: 300px; /* adjust chart height */
        
            /* Center widget content */
            display: flex;
            justify-content: center;
            align-items: center;
        }


        .block-bottom {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .block-img {
            width: 100px;
            height: 100px;
            object-fit: contain;
        }
                
        .tradingview-widget-copyright {
            font-size: 10px !important;       /* smaller font */
            color: #666 !important;           /* subtle gray color */
            text-align: center !important;    /* center the text */
            padding-top: 5px !important;      /* some spacing from widget */
            font-family: Arial, sans-serif !important;
            user-select: none;                /* prevent selection if you want */
            opacity: 0.7;                    /* slight transparency */
        }
        
        /* Make the form layout two rows: title row and inputs row */
        #backtest-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        /* First row (title) */
        #backtest-form h3 {
            margin: 0;
            text-align: center;
        }
        
        /* Second row (all inputs in one line) */
        .form-row {
            display: flex;
            flex-wrap: wrap; /* Wrap on smaller screens */
            gap: 10px;
            justify-content: center;
        }
        
        /* Make labels and inputs stay together */
        .form-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        /* Reduce input width so they fit in one line */
        .form-group input,
        .form-group select {
            width: 145px;
        }
        
        #backtest-form label {
            margin: 0 5px 0 0; /* small space after label */
        }

        #backtest-form input,
        #backtest-form select,
        #backtest-form button {
            margin: 0 10px 0 0;
        }
        
        #backtest-form button {
            white-space: nowrap; /* prevents breaking button text */
        }
        
        /* Make form labels bigger */
        label {
            font-size: 15px;
        }
        
        /* Make inputs bigger (both text & number/date selectors) */
        input, select, textarea, button {
            font-size: 15px;   /* text inside box */
            padding: 8px 10px; /* a bit more padding for comfort */
        }
        
        /* Make placeholder text bigger */
        input::placeholder, textarea::placeholder {
            font-size: 15px;
        }

        /* Optional: make the "Run Backtest" button match */
        button {
            font-size: 15px;
            padding: 10px 15px;
            cursor: pointer;
        }

        /* Results section */
        .results-section {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px auto;
            width: 90%;
            max-width: 1200px;
            border: 1px solid #e0e0e0;
        }
        #results p {
            color: #000000;
            font-size: 20px;
            line-height: 1.6;
        }

        /* Smooth fade transition */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .modal.show {
            display: block;
            opacity: 1;
        }
    
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 300px;
            border-radius: 8px;
            text-align: center;
        }

        .close-btn {
            float: right;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Icons */
        #modal-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }
        .success-icon { color: #2ecc71; }
        .error-icon { color: #e74c3c; }

        /* Animation */
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        
        .close-btn:hover { color: #000; }

        /* Footer styling */
        .footer {
            text-align: center;
            padding: 15px;
            font-size: 14px;
            background-color: #f2f2f2;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        
        .footer a {
            color: black;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* Layout for Contact + Follow Us */
        /* Main layout: Contact Us + Follow Us side by side */
        #contact-section {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 20px auto;
            flex-wrap: wrap; /* Makes it responsive on small screens */
        }
        
        /* Shared box styling */
        .contact-box, .follow-box {
            flex: 1;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            min-width: 300px; /* Prevents boxes from shrinking too much */
        }

        /* Headings */
        .contact-box h2, .follow-box h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        /* Contact form styles */
        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .contact-form label {
            font-weight: bold;
        }
        
        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .contact-form textarea {
            resize: vertical;
            min-height: 100px;
        }

        .contact-form button {
            background-color: #0077B5;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .contact-form button:hover {
            background-color: #005f87;
        }
        
        /* Follow Us buttons */
        .social-btn {
            display: block;
            padding: 12px 15px;
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .social-btn i {
            margin-right: 10px;
        }

        /* Brand colors */
        .social-btn.linkedin { background-color: #0077B5; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        
        /* Hover effect for Follow Us buttons */
        .social-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

    </style>
</head>
<body>

<!-- Navigation bar -->
<div class="navbar">
    <div class="logo">
        <a href="https://neuraltrend.org">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="My Logo">
        </a>
    </div>

    <div class="nav-links">
        <a href="https://neuraltrend.org">Home</a>
        <a href="https://github.com/neuraltrend/">Sample Algorithms</a>
        <a href="/market">Market Insight</a>
        <a href="/knowledge">Knowledge Hub</a>
        <a href="mailto:contact@neuraltrend.org">Contact</a>
    </div>
</div>

<main>
    <h1>NeuralTrend</h1>
    <p>Building advanced AI to deliver actionable insights across cryptocurrency and traditional markets (for informational purposes only — not financial advice).</p>

    <!-- Products Section --> 
    <section id="products" style="padding: 40px 30px;">
        <h2>Models</h2>
        <div class="product-box">
        
        <!-- EpochSignaler -->
        <div style="margin-bottom: 60px;">
            <h3>EpochSignaler</h3>
            <p>
                An AI-based (transformer+LSTM) algorithm for crypto and traditional assets analytics signal. Basic model is based on a forward-looking fixed price movement normalized by volatility. Advanced signals coming soon...(Q4 2025)
            </p>

        <!-- Backtest Simulation -->
        <section class="results-section">
            <form id="backtest-form">
                <h3>Backtest Simulation for EpochSignaler (Basic)</h3>
        
                <div class="form-row">
                    <div class="form-group">
                        <label for="ticker">Asset Ticker:</label>
                        <select id="ticker" name="ticker" required>
                            <option value="BTC-USD">BTC-USD</option>
                            <option value="ETH-USD">ETH-USD</option>
                            <option value="BNB-USD">BNB-USD</option>
                            <option value="SOL-USD">SOL-USD</option>
                            <option value="XRP-USD">XRP-USD</option>
                            <option value="ADA-USD">ADA-USD</option>
                            <option value="LINK-USD">LINK-USD</option>
                            <option value="DOGE-USD">DOGE-USD</option>
                        </select>
                    </div>
        
                    <div class="form-group">
                        <label for="cash">Initial Cash:</label>
                        <input type="number" id="cash" name="cash" required />
                    </div>

                    <div class="form-group">
                        <label for="interval">Interval:</label>
                        <select id="interval" name="interval" required>
                            <option value="D">D</option>
                        </select>
                    </div>
        
                    <div class="form-group">
                        <label for="start">Start Date:</label>
                        <input type="date" id="start" name="start" required />
                    </div>
        
                    <div class="form-group">
                        <label for="end">End Date:</label>
                        <input type="date" id="end" name="end" required />
                    </div>
        
                    <div class="form-group">
                        <label for="ticker_2">Compare with (Optional):</label>
                        <select id="ticker_2" name="ticker_2">
                            <option value="">None</option>
                            <option value="BTC-USD">BTC-USD</option>
                            <option value="ETH-USD">ETH-USD</option>
                            <option value="BNB-USD">BNB-USD</option>
                            <option value="SOL-USD">SOL-USD</option>
                            <option value="XRP-USD">XRP-USD</option>
                            <option value="ADA-USD">ADA-USD</option>
                            <option value="LINK-USD">LINK-USD</option>
                            <option value="DOGE-USD">DOGE-USD</option>
                        </select>
                    </div>
        
                    <div class="form-group" style="align-self: flex-end;">
                        <button type="submit">Run Backtest</button>
                    </div>
                </div>
            </form>
        
            <div id="results"></div>
        </section>

        <!-- Custom Modal -->
        <div id="customModal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div id="modal-icon"></div>
                <p id="modal-message"></p>
            </div>
        </div>

        <!-- EpochSignaler Image -->
        <div style="text-align: center; margin-top: 20px;">
            <img src="{{ url_for('static', filename='epoch_signaler.png') }}" alt="EpochSignaler" style="max-width: 75%; height: auto;">
        </div>
        </div>

        <div class="three-blocks">
        <!-- Block 1 -->
        <div class="block">
        <div class="block-title">EpochSignaler-BTC-USD</div>
        <div class="block-chart">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright">
        <a href="https://www.tradingview.com/symbols/CRYPTO-BTCUSD/?exchange=CRYPTO" 
            rel="noopener nofollow" target="_blank" 
            style="color:#666; text-decoration:none;">
            BTCUSD chart by TradingView
        </a>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
            "allow_symbol_change": true,
            "calendar": false,
            "details": false,
            "hide_side_toolbar": true,
            "hide_top_toolbar": false,
            "hide_legend": true,
            "hide_volume": false,
            "hotlist": false,
            "interval": "D",
            "locale": "en",
            "save_image": true,
            "style": "1",
            "symbol": "CRYPTO:BTCUSD",
            "theme": "dark",
            "timezone": "Etc/UTC",
            "backgroundColor": "rgba(184, 184, 184, 1)",
            "gridColor": "rgba(242, 242, 242, 0.06)",
            "watchlist": [],
            "withdateranges": false,
            "compareSymbols": [],
            "studies": [],
            "width": 400,
            "height": 500
        }
        </script>
        </div>
        <!-- TradingView Widget END -->
        </div>
        <div class="block-bottom">
            <p>Current EpochSignaler-BTC-USD signal (basic model):</p>
            <a href="https://coinmarketcap.com/currencies/bitcoin/" target="_blank">
            <img src="{{ url_for('static', filename='sell.png') }}" alt="Icon" class="block-img">
            </a>
        </div>
        </div>

        <!-- Block 2 -->
        <div class="block">
        <div class="block-title">EpochSignaler-ETH-USD</div>
        <div class="block-chart">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright">
        <a href="https://www.tradingview.com/symbols/CRYPTO-ETHUSD/?exchange=CRYPTO" 
            rel="noopener nofollow" target="_blank" 
            style="color:#666; text-decoration:none;">
            ETHUSD chart by TradingView
        </a>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
            "allow_symbol_change": true,
            "calendar": false,
            "details": false,
            "hide_side_toolbar": true,
            "hide_top_toolbar": false,
            "hide_legend": true,
            "hide_volume": false,
            "hotlist": false,
            "interval": "D",
            "locale": "en",
            "save_image": true,
            "style": "1",
            "symbol": "CRYPTO:ETHUSD",
            "theme": "dark",
            "timezone": "Etc/UTC",
            "backgroundColor": "rgba(184, 184, 184, 1)",
            "gridColor": "rgba(242, 242, 242, 0.06)",
            "watchlist": [],
            "withdateranges": false,
            "compareSymbols": [],
            "studies": [],
            "width": 400,
            "height": 500
        }
        </script>
        </div>
        <!-- TradingView Widget END -->
        </div>
        <div class="block-bottom">
            <p>Current EpochSignaler-ETH-USD signal (basic model):</p>
            <a href="https://coinmarketcap.com/currencies/ethereum/" target="_blank">
            <img src="{{ url_for('static', filename='hold.png') }}" alt="Icon" class="block-img">
            </a>
        </div>
        </div>

        <!-- Block 3 -->
        <div class="block">
        <div class="block-title">EpochSignaler-SOL-USD</div>
        <div class="block-chart">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright">
        <a href="https://www.tradingview.com/symbols/CRYPTO-SOLUSD/?exchange=CRYPTO" 
            rel="noopener nofollow" target="_blank" 
            style="color:#666; text-decoration:none;">
            SOLUSD chart by TradingView
        </a>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
            "allow_symbol_change": true,
            "calendar": false,
            "details": false,
            "hide_side_toolbar": true,
            "hide_top_toolbar": false,
            "hide_legend": true,
            "hide_volume": false,
            "hotlist": false,
            "interval": "D",
            "locale": "en",
            "save_image": true,
            "style": "1",
            "symbol": "CRYPTO:SOLUSD",
            "theme": "dark",
            "timezone": "Etc/UTC",
            "backgroundColor": "rgba(184, 184, 184, 1)",
            "gridColor": "rgba(242, 242, 242, 0.06)",
            "watchlist": [],
            "withdateranges": false,
            "compareSymbols": [],
            "studies": [],
            "width": 400,
            "height": 500
        }
        </script>
        </div>
        <!-- TradingView Widget END -->
        </div>
        <div class="block-bottom">
            <p>Current EpochSignaler-SOL-USD signal (basic model):</p>
            <a href="https://coinmarketcap.com/currencies/solana/" target="_blank">
            <img src="{{ url_for('static', filename='hold.png') }}" alt="Icon" class="block-img">
            </a>
        </div>
        </div>
        </div>
        
        <div style="height: 20px;"></div>

        <!-- EpochForecaster -->
        <div>
            <h3>EpochForecaster</h3>
            <p>
                EpochForecaster is an AI-based (LSTM) algorithm that provides multi-day price forecast for BTC-USD. Signal and other assets coming soon...(Q4 2025)
            </p>

            <!-- EpochForecaster Image -->
            <div style="text-align: center; margin-top: 20px;">
                <img src="{{ url_for('static', filename='epoch_forecaster.png') }}" alt="EpochForecaster" style="max-width: 80%; height: auto;">
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <img src="{{ url_for('static', filename='epoch_forecaster_2.png') }}" alt="EpochForecaster" style="max-width: 80%; height: auto;">
            </div>
        </div>
    </section>

    <section id="contact-section">
    <!-- Contact Us Block -->
    <div class="contact-box">
        <h2>Contact Us</h2>
        <p>Have questions or feedback? Send us a message:</p>
        <form action="https://formspree.io/f/xldlavwz" method="POST" class="contact-form">
            <div class="form-row">
                <label for="name">Name</label>
                <input type="text" name="name" id="name" placeholder="Your full name" required>

                <label for="email">Email</label>
                <input type="email" name="email" id="email" placeholder="your@email.com" required>
            </div>

            <div class="form-row">
                <label for="message">Message</label>
                <textarea name="message" id="message" placeholder="Type your message here..." required></textarea>
            </div>

            <button type="submit">Send</button>
        </form>
    </div>

    <!-- Follow Us Block -->
    <div class="follow-box">
        <h2>Follow Us</h2>
        <a href="https://www.linkedin.com/company/neuraltrend-llc/" target="_blank" class="social-btn linkedin">
            <i class="fab fa-linkedin"></i> LinkedIn
        </a>
        <a href="https://x.com/neuraltrendllc?s=21" target="_blank" class="social-btn twitter">
            <i class="fab fa-twitter"></i> Twitter
        </a>
        <a href="https://www.facebook.com/profile.php?id=61579289244747" target="_blank" class="social-btn facebook">
            <i class="fab fa-facebook"></i> Facebook
        </a>
    </div>
    </section>

    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

</main>

<!-- Footer -->
<div class="footer">
    <a href="/privacy">Privacy Notice</a>
</div>

<script>
document.getElementById('backtest-form').addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = new FormData(this);
    fetch('/backtest', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        renderResults(data);
    })
    .catch(error => console.error('Error:', error));
});

function renderResults({
    ticker, final_value, profit_factor, sharpe_ratio,
    equity_curve, epoch_equity_curve, dates,
    ticker_2, final_value_2, profit_factor_2, sharpe_ratio_2,
    equity_curve_2, buy_dates, buy_prices, sell_dates, sell_prices
}) {
    const resultsDiv = document.getElementById('results');

    let ticker1Stats = `
        <div>
            <h3>${ticker}</h3>
            <p>Final Value: $${final_value.toFixed(2)}</p>
            <p>Profit Factor: ${profit_factor}</p>
            <p>Sharpe Ratio: ${sharpe_ratio}</p>
        </div>
    `;

    let ticker2Stats = '';
    if (ticker_2) {
        ticker2Stats = `
            <div>
                <h3>${ticker_2}</h3>
                <p>Final Value: $${final_value_2.toFixed(2)}</p>
                <p>Profit Factor: ${profit_factor_2}</p>
                <p>Sharpe Ratio: ${sharpe_ratio_2}</p>
            </div>
        `;
    }

    resultsDiv.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr ${ticker_2 ? '1fr' : ''}; gap: 20px; align-items: start;">
            ${ticker1Stats}
            ${ticker2Stats}
        </div>
        <canvas id="equity-chart" width="600" height="400"></canvas>
    `;

    const ctx = document.getElementById('equity-chart').getContext('2d');

    // --- Compute dynamic offset for markers ---
    const equity_min = Math.min(...epoch_equity_curve);
    const equity_max = Math.max(...epoch_equity_curve);
    const offset = (equity_max - equity_min) * 0.04; // 4% of range

    const adjustedBuySignals = dates.map((d, i) => buy_dates.includes(d) ? epoch_equity_curve[i] - offset : null);
    const adjustedSellSignals = dates.map((d, i) => sell_dates.includes(d) ? epoch_equity_curve[i] + offset : null);

    const datasets = [
        {
    label: `${ticker} Equity Curve`,
    data: epoch_equity_curve,
    borderColor: 'blue',
    fill: false,
    pointRadius: 0,
    borderWidth: 2
},
{
    label: `${ticker} Buy&Hold Equity Curve`,
    data: equity_curve,
    borderColor: 'green',
    fill: false,
    pointRadius: 0,
    borderDash: [5, 5],
    borderWidth: 2
},
{
    label: 'Buy Signals',
    data: adjustedBuySignals,
    borderColor: 'green',
    backgroundColor: 'green',
    showLine: false,
    pointStyle: 'triangle',
    rotation: -90,
    pointRadius: 8
},
{
    label: 'Sell Signals',
    data: adjustedSellSignals,
    borderColor: 'red',
    backgroundColor: 'red',
    showLine: false,
    pointStyle: 'triangle',
    rotation: 90,
    pointRadius: 8
}
    ];

    if (equity_curve_2 && equity_curve_2.length > 0) {
        datasets.push({
            label: `${ticker_2} Equity Curve`,
            data: equity_curve_2,
            borderColor: 'red',
            pointRadius: 0,   // <-- remove circle markers
            fill: false
        });
    }

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: dates,
            datasets: datasets
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        usePointStyle: true,
                        pointStyle: 'line'  // legend marker now matches the line
                    }
                }
            },
            scales: {
                x: { display: true, title: { display: true, text: 'Date' } },
                y: { display: true, title: { display: true, text: 'Equity ($)' } }
            }
        }
    });
}
    
</script>

<script>
function showModal(message, iconHTML) {
    const modal = document.getElementById("customModal");
    const modalMessage = document.getElementById("modal-message");
    const modalIcon = document.getElementById("modal-icon");

    modalMessage.textContent = message;
    modalIcon.innerHTML = iconHTML || "";

    modal.classList.add("show");

    // Auto-close after 3 seconds with fade-out
    setTimeout(() => {
        modal.classList.remove("show");
        setTimeout(() => {
            modal.style.display = "none";
        }, 400); // match transition time
    }, 3000);

    modal.style.display = "block";
}

// Manual close
document.querySelector(".close-btn").addEventListener("click", function () {
    const modal = document.getElementById("customModal");
    modal.classList.remove("show");
    setTimeout(() => modal.style.display = "none", 400);
});

// Click outside to close
window.addEventListener("click", function (event) {
    const modal = document.getElementById("customModal");
    if (event.target === modal) {
        modal.classList.remove("show");
        setTimeout(() => modal.style.display = "none", 400);
    }
});

// Form Validation
document.getElementById("backtest-form").addEventListener("submit", function(event) {
    const startDate = new Date(document.getElementById("start").value);
    const endDate = new Date(document.getElementById("end").value);
    const today = new Date();
    today.setHours(0,0,0,0);

    if (startDate > endDate) {
        showModal("❌ Start Date cannot be after End Date.", "Error!");
        event.preventDefault();
        return;
    }

    if (endDate > today) {
        showModal("❌ End Date cannot be in the future.", "Error!");
        event.preventDefault();
        return;
    }

    // If passes validation
    showModal("✅ Backtest started successfully!", "Success!");
});
</script>

<!-- 100% privacy-first analytics -->
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>

</body>
</html>
